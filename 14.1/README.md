# Домашнее задание к занятию «Компоненты Kubernetes» #

### Задание. Необходимо определить требуемые ресурсы ###

Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

1. Необходимо упаковать приложение в чарт для деплоя в разные окружения.
2. База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
3. Кеш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
4. Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
5. Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

### Решение ###

#### 2. Сначала сделайте расчёт всех необходимых ресурсов. ####

|          | RAM          | CPU     |  
|----------|--------------|---------|
| БД       | 4*3=12       | 1*3=3   |   
| КЭШ      | 4*3=12       | 1*3=3   | 
| Frontend | 0.05*5=0.250 | 0.2*5=1 |   
| Backend  | 0.6*10=6     | 1*10=10 |   
| **Total:**   | **30.25**    | **17**  |   



#### 3. Затем прикиньте количество рабочих нод, которые справятся с такой нагрузкой. ####

Так как в п.1 ничего не сказано про распределение копий, будем считать, что для отказоустойчивости каждая копия компонента должна располагаться на отдельной ноде   

Для "тяжёлых" компонентов (БД и КЭШ) логично взять отдельные ноды. Получим  3 ноды по 8 ОЗУ и 2 ЦПУ
Для фронтенда и бэкэнда: 10 нод по ~ 0,6  ОЗУ и 1.1 ЦПУ . Или округлённо 1 ОЗУ и 2 ЦПУ - минимальная конфигурация worker (если я правильно нашёл)

Так как в п.1 задания сказано про наличие разных окружений, но не их количество, то считаем, что есть один тестовый стенд равный продуктивному ирасполагается он на отдельных нодах (в отдельном неймспейсе)  

Итого: 6 нод по 8 ОЗУ и 2 ЦПУ + 20 нод по 1  ОЗУ и 2 ЦПУ

#### 4.Добавьте к полученным цифрам запас, который учитывает выход из строя как минимум одной ноды. ####

С учётом наличия 2-х окружений-неймспейсов получаем 8 нод по 8 ОЗУ и 2 ЦПУ + 22 ноды по 1  ОЗУ и 2 ЦПУ


#### 5. Добавьте служебные ресурсы к нодам. Помните, что для разных типов нод требовния к ресурсам разные. ####

Для организации кластрера необходимо минимум 3 master-ноды. Возьмём минимальную конфигурацию 2 ОЗУ и 2 ЦПУ.

#### 6. В результате должно быть указано количество нод и их параметры. ####

Итого:
  3 master-ноды по 2 ОЗУ и 2 ЦПУ.
  6 worker-нод по 8 ОЗУ и 2 ЦПУ + 20 worker-нод по 1  ОЗУ и 2 ЦПУ



